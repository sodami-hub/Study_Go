# TCP/IPμ™€ μ›Ήμ†μΌ“
9μ¥μ—μ„λ” μΆ€ λ” μ €μμ¤€μ ν”„λ΅ν† μ½μΈ TCPμ™€ UDP ν”„λ΅ν† μ½μ„ μ‚΄ν΄λ³΄κ³  net ν¨ν‚¤μ§€λ¥Ό μ΄μ©ν•΄ TCP/IP μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈλ¥Ό κ°λ°ν•λ” λ°©λ²•μ„ μ•μ•„λ³Έλ‹¤. λν• HTTPμ— κΈ°λ°μ„ λ‘” μ›Ήμ†μΌ“ ν”„λ΅ν† μ½κ³Ό λ΅μ»¬ ν™κ²½μ—μ„λ§ λ™μ‘ν•λ” μ λ‹‰μ¤ λ„λ©”μΈ μ†μΌ“μ„ μ΄μ©ν•΄ μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈλ¥Ό κ°λ°ν•λ” λ°©λ²•λ„ μ•μ•„λ³Έλ‹¤.

## TCP/IP
- TCP/IPλ€ μΈν„°λ„·μ„ κµ¬μ„±ν•λ” ν”„λ΅ν† μ½ μ§‘ν•©μ„ λ§ν•λ‹¤. μ΄ μ΄λ¦„μ€ κ°€μ¥ λ„λ¦¬ μ•λ ¤μ§„ ν”„λ΅ν† μ½μΈ TCPμ™€ IPμ—μ„ λ”°μ¨ κ²ƒμ΄λ‹¤. TCPλ€ μ „μ†΅ μ μ–΄ ν”„λ΅ν† μ½(Transmission Control Protocol)μ μ¤„μ„λ§μ΄λ‹¤. TCP μ—μ„λ” λ°μ΄ν„°λ¥Ό μ„Έκ·Έλ¨ΌνΈλ€ λ‹¨μ„λ΅ μ „μ†΅ν•κ³ , μ΄λ¥Ό TCP ν¨ν‚·μ΄λΌκ³ λ„ λ¶€λ¥Έλ‹¤. TCPμ ν° μ¥μ μ€ μ‹ λΆ°μ„±μ„ λ³΄μ¥ν•λ‹¤λ” κ²ƒμ΄λ‹¤.
- λ‘ λ¨Έμ‹  μ‚¬μ΄μ— TCP μ—°κ²°μ΄ μƒμ„±λλ©΄ μ „ν™”λ¥Ό μ—°κ²°ν•  λ•μ²λΌ μ „μ΄μ¤‘(full duplex) λ°©μ‹μ κ°€μƒ νλ΅κ°€ μƒμ„±λλ‹¤. κ·Έλ° λ‹¤μμ—” λ‘ λ¨Έμ‹  μ‚¬μ΄μ— μ£Όκ³ λ°›λ” λ°μ΄ν„°κ°€ μ •ν™•ν•λ‹¤λ” κ²ƒμ΄ λ³΄μ¥λλ” μƒνƒμ—μ„ μ§€μ†μ μΌλ΅ ν†µμ‹ ν•  μ μλ‹¤. TCP ν¨ν‚·μ ν—¤λ”μ—λ” μ¶λ°μ§€ ν¬νΈμ™€ λ©μ μ§€ ν¬νΈκ°€ μλ‹¤. μ΄ λ‘κ°μ ν•„λ“μ™€ μ¶λ°μ§€ IPμ£Όμ†μ™€ λ©μ μ§€ IPμ£Όμ†λ¥Ό ν•λ° λ¬¶μ–΄ ν•λ‚μ TCP μ—°κ²°μ— λ€ν• κ³ μ ν• μ‹λ³„μλ΅ μ‚¬μ©ν•λ‹¤.
- π™0-1024λ² ν¬νΈ λ²νΈλ” λ£¨νΈ(root) μ‚¬μ©μλ§ μ ‘κ·Όν•  μ μλ‹¤λ” κ²ƒμ„ μ°Έκ³ ν•μ.
- iPλ” μΈν„°λ„· ν”„λ΅ν† μ½μ μ¤„μ„λ§μ΄λ‹¤. IPμ κ°€μ¥ ν° νΉμ§•μ€ μμ²΄μ μΌλ΅λ” μ‹ λΆ°μ„±μ„ λ³΄μ¥ν•μ§€ μ•λ”λ‹¤λ” κ²ƒμ΄λ‹¤. 
- UDPλ” IPλ¥Ό κΈ°λ°μΌλ΅ μ‘λ™ν•λ©° μ‹ λΆ°μ„±μ„ λ³΄μ¥ν•μ§€ μ•λ”λ‹¤. 
#### nc(1) μ»¤λ§¨λ“λΌμΈ μ ν‹Έλ¦¬ν‹°
-  nc(1) μ ν‹Έλ¦¬ν‹°λ” netcat(1)μ΄λΌκ³ λ„ λ¶€λ¥΄λ©° TCP/IP μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈλ¥Ό ν…μ¤νΈν•λ” λ° κµ‰μ¥ν μ μ©ν•λ‹¤. μ‚¬μ‹¤ nc(1)μ€ TCP μ—°κ²° λ§ΊκΈ°, UDP λ©”μ‹μ§€ μ£Όκ³ λ°›κΈ°, TCP μ„λ²„ μ—­ν•  λ“± TCP, UDP, IPv4, IPv6μ™€ κ΄€λ ¨λ λ¨λ“  κΈ°λ¥μ„ μν–‰ν•  μ μλ‹¤.
- nc(1)μ„ TCP μ„λΉ„μ¤μ ν΄λΌμ΄μ–ΈνΈλ΅λ„ μ‚¬μ©ν•  μ μλ‹¤. μλ¥Ό λ“¤μ–΄ TCP μ„λΉ„μ¤μ IPμ£Όμ†κ°€ 10.10.1.123μ΄κ³  1234λ² ν¬νΈλ¥Ό κ°–κ³  μλ‹¤λ©΄ λ‹¤μκ³Ό κ°™μ€ μ»¤λ§¨λ“λ¥Ό μ‹¤ν–‰ν•΄ TCPμ—°κ²°μ„ λ§Ίμ„ μ μλ‹¤.
```
$ nc 10.10.1.123 1234
```
- -l μµμ…μ„ μ§€μ •ν•λ©΄ netcat(1)μ„ μ„λ²„λ΅ κµ¬λ™ν•  μ μκ³  μ»¤λ§¨λ“λ¥Ό μ‹¤ν–‰ν•λ©΄ netcat(1)μ— μ§€μ •ν• ν¬νΈ λ²νΈλ΅ μ—°κ²° μ”μ²­μ΄ λ“¤μ–΄μ¤κΈΈ κΈ°λ‹¤λ¦¬κ² λλ‹¤. κΈ°λ³Έμ μΌλ΅ nc(1)λ” TCP ν”„λ΅ν† μ½μ„ μ‚¬μ©ν•λ‹¤. κ·Έλ¬λ‚ -u μµμ…μ„ μ‚¬μ©ν•λ©΄ UDP ν”„λ΅ν† μ½μ„ μ‚¬μ©ν•λ‹¤. λ§μ§€λ§‰μΌλ΅ -vμ™€ -vv μµμ…μ„ μ§€μ •ν•λ©΄ netcat(1)μ μ¶λ ¥μ„ μƒμ„Έν•κ² ν‘ν„ν•λ‹¤.

## net ν¨ν‚¤μ§€
- Go ν‘μ¤€ λΌμ΄λΈλ¬λ¦¬μΈ net ν¨ν‚¤μ§€λ” TCP/IP, UDP, λ„λ©”μΈ μ΄λ¦„ ν™•μΈ, μ λ‹‰μ¤ λ„λ©”μΈ μ†μΌ“μ„ λ‹¤λ£¨λ” ν¨ν‚¤μ§€λ‹¤. net.Dial() ν•¨μλ” ν΄λΌμ΄μ–ΈνΈμ—μ„ λ„¤νΈμ›ν¬μ— μ—°κ²°ν•  λ• μ‚¬μ©ν•κ³  net.Listen()ν•¨μλ” μ„λ²„ μ—­ν• μ„ ν•λ” Go ν”„λ΅κ·Έλ¨μ—μ„ λ„¤νΈμ›ν¬ μ ‘μ†μ„ λ°›λ”λ° μ‚¬μ©ν•λ‹¤. net.Dial() ν•¨μμ™€ net.Listen() ν•¨μλ” λ¨λ‘ net.Conn νƒ€μ…μ κ°’μ„ λ°ν™ν•λ‹¤. μ΄ νƒ€μ…μ€ io.Reader, io.WriterμΈν„°νμ΄μ¬λ¥΄ κµ¬ν„ν• νƒ€μ…μ΄λ―€λ΅ νμΌ μ…μ¶λ ¥κ³Ό κ΄€λ ¨λ μ½”λ“λ¥Ό μ΄μ©ν•΄ net.Conn μ—°κ²°μ—μ„ λ°μ΄ν„°λ¥Ό μ½κ±°λ‚ μ“Έ μ μλ‹¤. 


## TCP ν΄λΌμ΄μ–ΈνΈ
#### net.Dial()μ„ μ΄μ©ν• TCP ν΄λΌμ΄μ–ΈνΈ κ°λ°[/tcpC]
#### net.DialTCP()λ¥Ό μ΄μ©ν•΄ TCP ν΄λΌμ΄μ–ΈνΈ κ°λ°[/otherTCPclient]

## TCP μ„λ²„
TCP μ„λ²„λ¥Ό ν†µν•΄ TCP ν΄λΌμ΄μ–ΈνΈμ™€ μƒνΈμ‘μ©ν•λ” λ‘ κ°€μ§€ λ°©μ‹μ„ μ‚΄ν΄λ³Έλ‹¤.
#### net.Listen()μ„ μ΄μ©ν• TCP μ„λ²„ κ°λ°
- net.Listen()μ„ μ΄μ©ν•΄ ν•μ¬ λ‚ μ§μ™€ μ‹κ°μ„ λ„¤νΈμ›ν¬ ν¨ν‚· ν•λ‚μ— λ‹΄μ•„ ν΄λΌμ΄μ–ΈνΈμ— λ°ν™ν•λ” TCP μ„λ²„λ¥Ό κ°λ°ν•΄λ³Έλ‹¤. κµ¬μ²΄μ μΌλ΅ ν΄λΌμ΄μ–ΈνΈμ™€ μ—°κ²°ν• ν›„μ— μ΄μμ²΄μ λ΅λ¶€ν„° λ‚ μ§μ™€ μ‹κ°μ„ μ•μ•„λ‚΄ κ·Έ κ°’μ„ λ‹¤μ‹ ν΄λΌμ΄μ–ΈνΈμ— λ³΄λ‚Έλ‹¤ net.Listen() ν•¨μλ” μ—°κ²°μ΄ λ§Ίμ–΄μ§€κΈΈ κΈ°λ‹¤λ¦¬λ” λ° μ‚¬μ©ν•κ³  net.Accept() λ©”μ„λ“λ” λ‹¤μ μ—°κ²°μ΄ λ“¤μ–΄μ¬ λ•κΉμ§€ κΈ°λ‹¤λ¦¬λ‹¤κ°€ μ—°κ²°μ΄ λ§Ίμ–΄μ§€λ©΄ ν΄λΌμ΄μ–ΈνΈ μ •λ³΄μ™€ ν•¨κ» Conn λ³€μλ¥Ό λ°ν™ν•λ‹¤.[/tcpS]
#### net.ListenTCP()λ¥Ό μ‚¬μ©ν• TCP μ„λ²„ κ°λ°
- [/otherTCPserver.go]TCP μ„λ²„λ” μ—μ½” μ„λΉ„μ¤λ¥Ό μ κ³µν•κ³  μ΄λ” ν΄λΌμ΄μ–ΈνΈμ—μ„ μμ‹ ν• λ°μ΄ν„°λ¥Ό κ·Έλ€λ΅ λλ ¤μ£Όλ” μ„λΉ„μ¤λ‹¤.

## UDP ν΄λΌμ΄μ–ΈνΈ[/udpC]

## UDP μ„λ²„[/udpS]

## λ™μ‹μ„±μ„ μ§€μ›ν•λ” TCP μ„λ²„[/concTCP]
- λ™μ‹μ„±μλ” TCP μ„λ²„μ—μ„λ” Accept()λ¥Ό νΈμ¶ν•  λ•λ§λ‹¤ μƒλ΅μ΄ κ³ λ£¨ν‹΄μ„ μ΄μ©ν•΄ ν΄λΌμ΄μ–ΈνΈμ— μ„λΉ„μ¤λ¥Ό μ κ³µν•λ‹¤. λ”°λΌμ„ ν•λ‚μ μ„λ²„κ°€ λ™μ‹μ— μ—¬λ¬ ν΄λΌμ΄μ–ΈνΈμ— μ„λΉ„μ¤λ¥Ό μ κ³µν•  μ μλ‹¤. μ‹¤μ  ν”„λ΅λ•μ… ν™κ²½μ μ„λ²„λ“¤μ€ ν•­μƒ μ΄λ° λ°©μ‹μΌλ΅ κµ¬ν„ν•λ‹¤.

## μ λ‹‰μ¤ λ„λ©”μΈ μ†μΌ“
- μ λ‹‰μ¤ λ„λ©”μΈ μ†μΌ“ λλ” ν”„λ΅μ„Έμ¤ κ°„ ν†µμ‹  μ†μΌ“μ€ κ°™μ€ λ¨Έμ‹ μ—μ„ μ‹¤ν–‰ν•λ” ν”„λ΅μ„Έμ¤ μ‚¬μ΄μ—μ„ λ°μ΄ν„°λ¥Ό κµν™ν•κ³ μ μ‚¬μ©ν•λ” λ°μ΄ν„° ν†µμ‹  μ—”λ“ν¬μΈνΈλ‹¤. 
κ°™μ€ λ¨Έμ‹ μ—μ„λ” TCP/IPμ—°κ²° λ€μ‹  μ λ‹‰μ¤ λ„λ©”μΈ μ†μΌ“μ„ μ‚¬μ©ν•λ‹¤. κ·Έ μ΄μ λ” λΉ λ¥΄κ³ , μƒλ€μ μΌλ΅ λ” μ μ€ μμ›μ„ μ‚¬μ©ν•κΈ° λ•λ¬Έμ΄λ‹¤.
#### μ λ‹‰μ¤ λ„λ©”μΈ μ†μΌ“ μ„λ²„[/socketServer]
#### μ λ‹‰μ¤ λ„λ©”μΈ μ†μΌ“ ν΄λΌμ΄μ–ΈνΈ[/socketClient]

## μ›Ήμ†μΌ“ μ„λ²„ λ§λ“¤κΈ°
- μ›Ήμ†μΌ“ ν”„λ΅ν† μ½μ€ ν•λ‚μ TCP μ—°κ²° μ„μ—μ„ μ „μ΄μ¤‘ ν†µμ‹ (λ™μ‹μ— μ–‘λ±΅ν–¥μΌλ΅ λ°μ΄ν„°λ¥Ό μ „μ†΅ν•  μ μλ‹¤.) μ±„λ„μ„ μ κ³µν•λ” ν†µμ‹  ν”„λ΅ν† μ½μ΄λ‹¤. μ›Ήμ†μΌ“ ν”„λ΅ν† μ½μ€ RFC6455μ— μ •μλΌ μμΌλ©° http://, https:// λ€μ‹  ws://, wss:// λ¥Ό μ‚¬μ©ν•λ‹¤. μ΄λ² μ μ—μ„λ” gorilla/websocket λ¨λ“μ„ μƒγ…‡ν•΄ μ‘μ§€λ§ μ κΈ°λ¥μ„ ν•λ” μ›Ήμ†μΌ“ μ„λ²„λ¥Ό κ°λ°ν•΄λ³Έλ‹¤. μ„λ²λ μ—μ½” μ„λΉ„μ¤λ¥Ό κµ¬ν„ν•΄ ν΄λΌμ΄μ–ΈνΈμ μ…λ ¥μ„ κ·Έλ€λ΅ λ°ν™ν•κ² λ§λ“¤ κ²ƒμ΄λ‹¤.
- golang.org/x/net/websocket ν¨ν‚¤μ§€λ¥Ό μ‚¬μ”ν•΄λ„ μ›Ήμ†μΌ“ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„λ¥Ό κ°λ°ν•  μ μλ‹¤. ν•μ§€λ§ ν•΄λ‹Ή ν¨ν‚¤μ§€μ—λ” μΌλ¶€ κΈ°λ¥μ΄ λ¶€μ΅±ν•λ―€λ΅ https://godoc.org/github.com/gorilla/websocketμ΄λ‚ https://godoc.org/nhooyr.io/websocketμ„ μ‚¬μ©ν•λ” κ²ƒμ„ κ¶μ¥ν•λ‹¤.
- μ›Ήμ†μΌ“ ν”„λ΅ν† μ½μ μ¥μ μ€ λ‹¤μκ³Ό κ°™λ‹¤.
1. μ „μ΄μ¤‘ ν†µμ‹ μ„ μ κ³µν•λ” μ–‘λ°©ν–¥ μ±„λ„μ΄λ‹¤. λ”°λΌμ„ μ„λ²„λ” ν΄λΌμ΄μ–΄λ©κ°€ λ°μ΄ν„°λ¥Ό μ½κΈ°λ¥Ό κΈ°λ‹¤λ¦΄ ν•„μ”κ°€ μ—†κ³ , ν΄λΌμ΄μ–ΈνΈλ„ λ§μ°¬κ°€μ§€λ‹¤.
2. TCP μ†μΌ“μ΄λ―€λ΅ HTTP μ—°κ²°μ„ λ§ΊκΈ° μ„ν• μ¶”κ°€μ μΈ λΉ„μ©μ΄ λ°μƒν•μ§€ μ•λ”λ‹¤.
3. μ›Ήμ†μΌ“ μ—°κ²°μ€ HTTP λ°μ΄ν„°λ¥Ό μ „μ†΅ν•λ”λ° μ‚¬μ©ν•  μ μμ§€λ§, μΌλ° HTTP μ—°κ²°μ΄ μ›Ήμ†μΌ“μ²λΌ λ™μ‘ν•μ§€ μ•λ”λ‹¤.
4. μ›Ήμ†μΌ“ μ—°κ²°μ€ λμ–΄μ§€μ§€ μ•κ³  κ³„μ† μ μ§€ν•  μ μμΌλ―€λ΅ λ§¤λ² μƒλ΅ μ—΄ ν•„μ”κ°€ μ—†λ‹¤.
5. μ›Ήμ†μΌ“ μ—°κ²°μ€ μ‹¤μ‹κ°„ μ›Ή μ• ν”λ¦¬μΌ€μ΄μ…μ—μ„ μ‚¬μ©ν•  μ μλ‹¤.
6. ν΄λΌμ΄μ–ΈνΈκ°€ μ”μ²­ν•μ§€ μ•μ•„λ„ μ„λ²„μ—μ„ ν΄λΌμ΄μ–ΈνΈλ΅ μ–΄λ λ•λ‚ λ°μ΄ν„°λ¥Ό μ „μ†΅ν•  μ μλ‹¤.
7. μ›Ήμ†μΌ“μ€ HTML5 κ·κ²©μ— ν¬ν•¨λΌ μκΈ° λ•λ¬Έμ— λ¨λ“  ν„λ€ μ›Ή λΈλΌμ°μ €μ—μ„ μ§€μ›ν•λ‹¤.

- μ„λ²„ κµ¬ν„μ„ μ‚΄ν΄λ³΄κΈ° μ „μ— gorilla/websocket ν¨ν‚¤μ§€μ websocket.Upgraderλ©”μ„λ“λ¥Ό μ•μ•„λ‘ ν•„μ”κ°€ μλ‹¤. websocket.Upgrader λ©”μ„λ“λ” HTTP μ„λ²„ μ—°κ²°μ„ μ›Ήμ†μΌ“ ν”„λ΅ν† μ½λ΅ μ—…κ·Έλ μ΄λ“ν•κ³  μ—…κ·Έλ μ΄λ“λ¥Ό μ„ν• μΊκ°λ³€μλ¥Ό μ§€μ •ν•  μ μλ‹¤. κ·Έλ° λ‹¤μ HTTP μ—°κ²°μ€ μ›Ήμ†μΌ“ μ—°κ²°μ΄ λΌ HTTP ν”„λ΅ν† μ½μ λ©”μ‹μ§€λ” λ³΄λ‚Ό μ μ—†κ² λλ‹¤.
##### μ„λ²„ κµ¬ν„[/ws]

## μ›Ήμ†μΌ“ ν΄λΌμ΄μ–ΈνΈ λ§λ“¤κΈ°[/wsClient]


## μ—°μµλ¬Έμ 
1. λ™μ‹μ„±μ„ μ§€μ›ν•λ©° λ―Έλ¦¬ μ •μν• νΉμ •ν• λ²”μ„μ λ‚μλ“¤μ„ μƒμ„±ν•΄μ£Όλ” TCP μ„λ²„λ¥Ό κ°λ°ν•΄λ³΄μ
2. λ™μ‹μ„±μ„ μ§€μ›ν•λ©° ν΄λΌμ΄μ–ΈνΈμ—μ„ μ§€μ •ν• λ²”μ„μ λ‚μλ“¤μ„ μƒμ„±ν•΄μ£Όλ” TCP μ„λ²„λ¥Ό κ°λ°ν•΄λ³΄μ. κ°’λ“¤μ΄ μ €μ¥λ λ°°μ—΄μ—μ„ λλ¤ν•κ² κ°’μ„ μ§€μ •ν•λ” λ°©μ‹μΌλ΅λ„ κµ¬ν„ν•  μ μλ‹¤.
3. λ™μ‹μ„± μλ” TPC μ„λ²„μ—μ„ μ λ‹‰μ¤ μ‹κ·Έλ„μ„ μ²λ¦¬ν•λ” κΈ°λ¥μ„ μ¶”κ°€ν•΄ μ°μ•„ν• μΆ…λ£κ°€ κ°€λ¥ν•λ„λ΅ κ°λ°ν•΄λ³΄μ
4. λ‚μλ¥Ό μƒμ„±ν•λ” μ λ‹‰μ¤ λ„λ©”μΈ μ†μΌ“ μ„λ²„λ¥Ό κ°λ°ν•΄λ³΄μ. κ·Έλ° λ‹¤μ ν•΄λ‹Ή μ„λ²„μ ν΄λΌμ΄μ–ΈνΈλ„ κ°λ°ν•΄λ³΄μ
5. ν΄λΌμ΄μ–ΈνΈκ°€ λ³΄λ‚Έ κ°μλ§νΌμ λλ¤ν• μ •μλ¥Ό μƒμ„±ν•λ” μ›Ήμ†μΌ“ μ„λ²„λ¥Ό κ°λ°ν•΄λ³΄μ. μƒμ„±ν•  μ •μμ κ°μλ” ν΄λΌμ΄μ–ΈνΈμ μ²« λ²μ§Έ λ©”μ‹μ§€μ—μ„ μ£Όμ–΄μ§„λ‹¤.

