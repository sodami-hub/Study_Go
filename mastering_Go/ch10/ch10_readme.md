# ch10 - REST API
Go 프로그래밍 언어를 이용해 간단한 RESTful 서버와 클라이언트를 개발해본다. REST는 REpresentational State Transfer의 약자로, 주로 웹 서비스를 설계할 때 사용한다. 웹 서비스에서는 HTML 형태로 정보를 교환하지만 RESTful서비스는 보통 JSON 형식으로 정보를 교환하고 Go에서도 이를 지원한다. REST는 어떤 운영체제나 시스템 아키텍처와 강하게 결합돼 있지 않고 특정 프로토콜도 아니다. RESTful 서비스를 개발하려면 HTTP와 같은 프로토콜을 사용해야 한다. RESTful 서비스를 개발할 때는 적절한 Go 구조체를 만들고 JSON 데이터로 마샬링 및 언마샬링을 수행해야 한다.

## REST 소개
보통 REST는 HTTP를 통한 JSON통신을 의미하기도 한다. 데이터를 일반 텍스트 형식으로 전송하는 경우도 있는데, 보통은 데이터가 간단해서 JSON 레코드를 사용할 필요가 없을 때 일반 텍스트를 사용한다. 그리고 RESTful 서비스의 작동 방식 때문에 서비스는 다음 원칙에 맞는 아키텍처를 가지고 있어야 한다.
- 클라이언트-서버 구조
- 무상태(stateless)
- 캐시 처리 가능(cacheable)
- 인터페이스 일관성(uniform interface)
- 계층화(layered system)
#### HTTP 프로토콜에 따라 HTTP 서버는 다음의 동작을 수행할 수 있다.
- POST
- GET
- PUT : 기존 리소스를 업데이트 한다. 리소스의 업데이트된 내용과 기존의 내용 전체를 포함한다.
- DELETE
- PATHCH : 리소스를 업데이트 한다. 보통 변경사항만 포함된다.
#### Go가 지원하는 HTTP메서드는 net/http 패키지에 다음과  같이 상수로 정의하고 있다.
```
const (
    MethodGet = "GET"
    MethodHead ="HEAD"
    MethodPost ="POST"
    MethodPut = "PUT"
    MethodPatch = "PATCH" // RFC 5789
    MethodDelete = "DELETE"
    MethodConnect = "CONNECT"
    MethodOption = "OPTIONS"
    MethodTrace = "TRACE"
)
```
#### 클라이언트의 요청에 대한 응답의 HTTP 상태코드는 다음과 같다.
- 200 : 모든것을 잘 처리했고 요청한 동작을 수행했다.
- 201 : 리소스를 생성했다.
- 202 : 요청이 받아들여져 처리하고 있다. 요청에 대한 처리가 오래 걸리는 경우 사용한다.
- 301 : 리소스가 영구적으로 이동했음을 의미한다. 이때 새로운 URI를 응답의 일부로 포함해야 한다. RESTful 서비스에서는 API 버저닝(API versioning)을 사용하기 때문에 거의 사용하지 않는다.
- 400 : 잘못된 요청(bad request) 이라는 의미이다. 클라이언트의 오류이다.
- 401 : 클라이언트가 인가 없이 보호된 리소스에 접근하려고 했음을 의미한다.
- 403 : 클라이언트가 적절한 인증을 했음에도 불구하고 해당 리소스에 접근할 권한이 없음을 의미한다. 유닉스에서 사용자가 해당 동작을 수행할 권한이 부족하다는 의미와 동일하다.
- 404 : 리소스를 찾지 못했다는 의미이다.
- 405 : 클라이언트에서 해당 리소스에 지원하지 않는 HTTP 메서드로 요청을 보냈음을 의미한다.
- 500 : 서버에서 실패한 경우의 상태코드이다.

## RESTful 서버와 클라이언트 개발
Go 표준 라이브러리를 이용해 RESTful 서버 및 클라이언트를 개발해보고 이를 통해 내부적으로 어떻게 동작하는지 확인해본다. 이번 절에서 만들 서버는 다음 엔드포인트들을 갖고 있따.
- /add : 서버에 새 항목을 추가할 때 사용하는 엔드포인트이다.
- /delete : 기존 항목을 삭제한다.
- /get : 기존 항목에 대한 정보를 가져온다.
- /time :  현재 날짜와 시간을 반환하는 엔드포인트며 주로 RESTful 서버를 테스트할 때 사용한다.
- / : 다른 엔드포인에 해당하지 않는 요청을 처리할 때 사용하는 엔드포인트다.
#### RESTful 서버
[/rServer]이 절에서의 구현은 REST 서비스가 내부적으로 어떻게 동작하는지 이해하고자 소개한다. 각 핸들러 함수의 로직은 간단하다. 사용자 입력을 읽어 입력과 HTTP 메서드가 원하는 것인지 체크한다. 서버는 클라이언트에 적절한 에러 메시지와 HTTP 코드를 응답해 무슨 일이 일어났는지 알 수 있게 한다. 


## 실제로 작동하는 RESTful 서버 만들기

## RESTful 클라이언트 만들기

## 바이너리 파일 업로드 및 다운로드

## RES API 문서화를 위한 스웨거 사용