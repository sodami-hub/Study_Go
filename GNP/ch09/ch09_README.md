# ch-09 HTTP 서비스 작성
- 요청을 처리하고 클라이언트에게 리소스를 보낼 수 있는 서버를 작성한다. net/http 패키지가 대부분의 세부사항을 처리해 주므로 서버를 초기화하고 설정하고, 리소스를 생성하고, 클라이언트가 보내는 요청을 처리하는 데에 집중할 수 있다.
- Go에서 HTTP서버는 서로 활발하게 통신하는 여러 요소에 의존한다. 여려 요소란 핸들러와 미들웨어, 그리고 멀티플렉서를 의미한다. 웹 서비스란 이 모든 요소를 포함하는 서버이다. 이번 장에서는 먼저 간단한 HTTP 웹 서비스를 살펴본 후 각 요소들에 대해 알아보겠다. 또한, net/http 패키지를 사용하여 TLS를 지원하거나 HTTP/2 클라이언트에 데이터를 푸시하는 동의 고급 사용법에 대해 알아본다. 이번 장의 내용을 잘 숙지하면 Go 기반의 HTTP 서버를 설정하고 미들웨어를 작성하고 핸들러를 사용하여 사용자의 요청에 응답하는 것에 익숙해질 것이다.

## Go HTTP 서버 해부
- 아래 그림은 일반적인 net/http 기반의 서버가 요청을 처리하는 과정을 보여준다.
![클라이언트의 요청이 서버에서 처리되어 핸들러에서 응답되는 과정](./go_reqAndresp.jpeg)
1. 먼저 서버의 멀티플렉서(컴퓨터 네트워킹 용어로는 라우터router)는 클라이언트의 요청을 수신한다. 
2. 멀티플렉서는 요청의 목적지를 결정한 후 해당 요청을 처리할 수 있는 능력이 있는 객체로 클라이언트의 요청을 전달한다. 이 객체를 핸들러(handler)라 부른다. 멀티플렉서 또한 클라이언트의 요청을 받아 적절한 핸들러로 넘겨주는 하나의 핸들러이다.
3. 핸들러가 요청을 넘겨받기 전, 멀티플렉서는 먼저 요청을 미들웨어라 불리는 하나 이상의 함수로 전달한다. 미들웨어는 핸들러의 동작을 변경하거나 로깅, 인증 및 접근 제어 등의 부가적인 작업을 수행한다.
- [/server] 예제에는 HTTP 서버와 멀티플렉서를 초기화하는 코드, 그리고 [/client]에는 앞의 서버로 요청을 보내는 클라이언트 코드가 있다.
